<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Movies</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
  </head>
  <body class="bg-gray-900 text-gray-100">
    <nav class="bg-blue-600 p-4 shadow-lg">
      <ul class="flex justify-center space-x-4 mr-auto">
        <li>
          <a href="index.html" class="text-white hover:text-blue-200">Home</a>
        </li>
        <li><span> | </span></li>
        <li>
          <a href="movies.html" class="text-white hover:text-blue-200" id="allMovies"
            >All Movies</a
          >
        </li>
        <li>
          <a href="search-movies.html" class="text-white hover:text-blue-200"
            >Search Movies</a
          >
        </li>
        <li>
          <a href="movie.html" class="text-white hover:text-blue-200"
            >Get Movie by ID</a
          >
        </li>
        <li>
          <a href="delete-movie.html" class="text-white hover:text-blue-200"
            >Delete Movie</a
          >
        </li>
        <li><span> | </span></li>
        <li>
          <a href="actors.html" class="text-white hover:text-blue-200"
            >All Actors</a
          >
        </li>
        <li>
          <a href="search-actors.html" class="text-white hover:text-blue-200"
            >Search Actors</a
          >
        </li>
        <li>
          <a href="actor.html" class="text-white hover:text-blue-200"
            >Get Actor by ID</a
          >
        </li>
        <li>
          <a href="delete-actor.html" class="text-white hover:text-blue-200"
            >Delete Actor</a
          >
        </li>
        <li><span> | </span></li>
        <li>
          <a href="directors.html" class="text-white hover:text-blue-200"
            >All Directors</a
          >
        </li>
        <li>
          <a href="search-directors.html" class="text-white hover:text-blue-200"
            >Search Directors</a
          >
        </li>
        <li>
          <a href="director.html" class="text-white hover:text-blue-200"
            >Get Director by ID</a
          >
        </li>
        <li>
          <a href="delete-director.html" class="text-white hover:text-blue-200"
            >Delete director</a
          >
        </li>
        <li>
          <a href="create-director.html" class="text-white hover:text-blue-200"
            >Create Director</a
          >
        </li>
      </ul>
    </nav>

    <!-- Main Content -->
    <div class="flex flex-col justify-center items-center mt-40 bg-gray-900">
      <div class="text-center">
        <h1 class="text-6xl font-bold text-white mb-4">
          Movies
        </h1>
        <p class="text-xl text-gray-400 mb-8">
          Discover and track your favorite movies.
        </p>
      </div>

      <script>
      //   document.addEventListener("DOMContentLoaded", () => {
      //       initMovieList();
      //   });
      //   async function initMovieList() {
      //   try {
      //     const products = await fetchProducts();
      //     console.log("here");

      //     populateTable(movies);
      //   } catch (error) {
      //     console.error("Error initializing movie list:", error);
      //   }
      // }

      async function fetchMovies() {
        try {
          const response = await fetch("/movies");
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }

          const data = await response.json();
          console.log(data);
          return data;
        } catch (error) {
          console.error("Error fetching movies:", error);
          throw error; // Rethrow to be handled by the caller
        }
      }

      function populateTable(movies) {
        const tableBody = document.getElementById("allMovies");
        movies.forEach((movie) => {
          const row = createProductRow(movie);
          tableBody.appendChild(row);
        });
      }

      function createProductRow(movie) {
        const row = document.createElement("tr");
        row.classList.add("hover:bg-gray-100");
        row.innerHTML = `
          <td class="text-center py-2 px-4 border-b border-gray-200">${movie.title}</td>
          <td class="text-center py-2 px-4 border-b border-gray-200">${movie.genre}</td>
          <td class="text-center py-2 px-4 border-b border-gray-200">$${movie.releaseDate}</td>
        `;
        return row;
      }

      // async function seeAllMovies(movieList) {
      //   const response = await fetch("/movies", {
      //     method: "POST",
      //     headers: {
      //       "Content-Type": "application/json",
      //     },
      //     body: JSON.stringify(movieList),
      //   });

      //   if (!response.ok) {
      //     throw new Error(`HTTP error! status: ${response.status}`);
      //   }

      //   return await response.json();
      // }

      fetchMovies();
      //addMovie();

      </script>

      <!-- About Us section content -->
      <!-- <div
        id="about"
        class="mt-16 text-center bg-gray-800 p-10 rounded-lg shadow-lg"
      >
        <h2 class="text-4xl font-bold text-white mb-4">About Us</h2>
        <p class="text-lg text-gray-400 max-w-md mx-auto">
          Film Fusion is a platform for movie enthusiasts to discover new
          movies, track watchlists, and share insights with a community of
          like-minded viewers. Join us and start your cinematic journey today!
        </p>
      </div>
    </div> -->
  </body>
</html>
